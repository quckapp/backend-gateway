(node:138876) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:125992) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:139024) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:132572) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:146348) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:54984) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:135796) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:203:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 201 |[39m     }
   [90m 202 |[39m
  [31m[1m>[22m[39m[90m 203 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 204 |[39m   }
   [90m 205 |[39m
   [90m 206 |[39m   [36masync[39m archive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:218:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 216 |[39m     channel[33m.[39marchivedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
   [90m 217 |[39m
  [31m[1m>[22m[39m[90m 218 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 219 |[39m   }
   [90m 220 |[39m
   [90m 221 |[39m   [36masync[39m unarchive(channelId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:245:19
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 243 |[39m
   [90m 244 |[39m     channel[33m.[39mstatus [33m=[39m [33mChannelStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
  [31m[1m>[22m[39m[90m 245 |[39m     [36mawait[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 246 |[39m
   [90m 247 |[39m     [90m// Update workspace channel count[39m
   [90m 248 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m { channelCount[33m:[39m [33m-[39m[35m1[39m })[33m;[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:131280) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:136252) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:144900) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:135396) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:147816) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:139:22
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 137 |[39m
   [90m 138 |[39m     [33mObject[39m[33m.[39massign(workspace[33m,[39m updateDto)[33m;[39m
  [31m[1m>[22m[39m[90m 139 |[39m     [36mreturn[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                      [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 140 |[39m   }
   [90m 141 |[39m
   [90m 142 |[39m   [36masync[39m [36mdelete[39m(id[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:152:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 150 |[39m     workspace[33m.[39mstatus [33m=[39m [33mWorkspaceStatus[39m[33m.[39m[33mDELETED[39m[33m;[39m
   [90m 151 |[39m     workspace[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
  [31m[1m>[22m[39m[90m 152 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 153 |[39m
   [90m 154 |[39m     [90m// Deactivate all members[39m
   [90m 155 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateMany([0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:340:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 338 |[39m     [36mconst[39m workspace [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mfindOne(workspaceId)[33m;[39m
   [90m 339 |[39m     workspace[33m.[39minviteCode [33m=[39m [36mthis[39m[33m.[39mgenerateInviteCode()[33m;[39m
  [31m[1m>[22m[39m[90m 340 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 341 |[39m
   [90m 342 |[39m     [36mreturn[39m workspace[33m.[39minviteCode[33m;[39m
   [90m 343 |[39m   }[0m

ERROR in ./src/modules/workspaces/workspaces.service.ts:363:21
TS2339: Property 'save' does not exist on type 'Workspace'.
  [0m [90m 361 |[39m     [90m// Update workspace owner[39m
   [90m 362 |[39m     workspace[33m.[39mownerId [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(newOwnerId)[33m;[39m
  [31m[1m>[22m[39m[90m 363 |[39m     [36mawait[39m workspace[33m.[39msave()[33m;[39m
   [90m     |[39m                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 364 |[39m
   [90m 365 |[39m     [90m// Update member roles[39m
   [90m 366 |[39m     [36mawait[39m [36mthis[39m[33m.[39mmemberModel[33m.[39mupdateOne([0m

(node:97092) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:148168) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:135292) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:147704) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:47920) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:125160) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:83244) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:112340) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:142820) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/files/files.service.ts:226:17
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 224 |[39m     [36mif[39m (dto[33m.[39misPublic [33m!==[39m undefined) file[33m.[39misPublic [33m=[39m dto[33m.[39misPublic[33m;[39m
   [90m 225 |[39m
  [31m[1m>[22m[39m[90m 226 |[39m     [36mreturn[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 227 |[39m   }
   [90m 228 |[39m
   [90m 229 |[39m   [36masync[39m [36mdelete[39m(fileId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[36mvoid[39m[33m>[39m {[0m

ERROR in ./src/modules/files/files.service.ts:247:16
TS2339: Property 'save' does not exist on type 'File'.
  [0m [90m 245 |[39m     file[33m.[39mdeletedAt [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m
   [90m 246 |[39m     file[33m.[39mdeletedBy [33m=[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(userId)[33m;[39m
  [31m[1m>[22m[39m[90m 247 |[39m     [36mawait[39m file[33m.[39msave()[33m;[39m
   [90m     |[39m                [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 248 |[39m
   [90m 249 |[39m     [90m// Update workspace storage usage[39m
   [90m 250 |[39m     [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mupdateUsage(file[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m {[0m

(node:150484) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

(node:52320) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

(node:134972) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:451:9
TS18047: 'channel' is possibly 'null'.
  [0m [90m 449 |[39m       [36mconst[39m channel [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindById(channelId)[33m;[39m
   [90m 450 |[39m       [36mconst[39m workspaceMember [33m=[39m [36mawait[39m [36mthis[39m[33m.[39mworkspacesService[33m.[39mgetMember(
  [31m[1m>[22m[39m[90m 451 |[39m         channel[33m.[39mworkspaceId[33m.[39mtoString()[33m,[39m
   [90m     |[39m         [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 452 |[39m         userId[33m,[39m
   [90m 453 |[39m       )[33m;[39m
   [90m 454 |[39m       [36mif[39m ([33m![39mworkspaceMember [33m||[39m [33m![39m[[32m'owner'[39m[33m,[39m [32m'admin'[39m][33m.[39mincludes(workspaceMember[33m.[39mrole)) {[0m

ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

(node:147656) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:153212) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:154308) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:148724) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:148760) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.controller.ts:255:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 253 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 254 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 255 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39munpinMessage(id[33m,[39m messageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 256 |[39m   }
   [90m 257 |[39m }
   [90m 258 |[39m[0m

(node:118632) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:128340) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:152308) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:143196) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:152512) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/users/user-profile-client.service.ts:62:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 60 |[39m     [36mconst[39m params [33m=[39m ids[33m.[39mmap(id [33m=>[39m [32m`ids=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 61 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 62 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 63 |[39m   }
   [90m 64 |[39m
   [90m 65 |[39m   [36masync[39m getUsersByExternalIds(externalIds[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m[33mSpringUserProfile[39m[][33m>[39m {[0m

ERROR in ./src/modules/users/user-profile-client.service.ts:69:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 67 |[39m     [36mconst[39m params [33m=[39m externalIds[33m.[39mmap(id [33m=>[39m [32m`externalIds=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 68 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 69 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch/external?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 70 |[39m   }
   [90m 71 |[39m
   [90m 72 |[39m   [36masync[39m searchUsers(query[33m:[39m string[33m,[39m excludeUserId[33m?[39m[33m:[39m string[33m,[39m page [33m=[39m [35m0[39m[33m,[39m size [33m=[39m [35m20[39m)[33m:[39m [33mPromise[39m[33m<[39m[33mSpringPagedResult[39m[33m<[39m[33mSpringUserProfileSummary[39m[33m>>[39m {[0m

(node:151384) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:139468) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ing both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:434:20
TS2339: Property 'save' does not exist on type 'Channel'.
  [0m [90m 432 |[39m
   [90m 433 |[39m     channel[33m.[39misDefault [33m=[39m [36mtrue[39m[33m;[39m
  [31m[1m>[22m[39m[90m 434 |[39m     [36mreturn[39m channel[33m.[39msave()[33m;[39m
   [90m     |[39m                    [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 435 |[39m   }
   [90m 436 |[39m
   [90m 437 |[39m   [90m// Utility methods[39m[0m

(node:153232) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[33m.[39mreadState[33m.[39mmentionCount [33m=[39m [35m0[39m[33m;[39m
   [90m 381 |[39m
  [31m[1m>[22m[39m[90m 382 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 383 |[39m   }
   [90m 384 |[39m
   [90m 385 |[39m   [36masync[39m getUnreadCounts(workspaceId[33m:[39m string[33m,[39m userId[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39m[33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m number[33m>>[39m {[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:151900) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:132380) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:152744) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:148112) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.controller.ts:255:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 253 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 254 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 255 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39munpinMessage(id[33m,[39m messageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 256 |[39m   }
   [90m 257 |[39m }
   [90m 258 |[39m[0m

(node:111436) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:152060) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:147780) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:142928) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/users/user-profile-client.service.ts:62:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 60 |[39m     [36mconst[39m params [33m=[39m ids[33m.[39mmap(id [33m=>[39m [32m`ids=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 61 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 62 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 63 |[39m   }
   [90m 64 |[39m
   [90m 65 |[39m   [36masync[39m getUsersByExternalIds(externalIds[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m[33mSpringUserProfile[39m[][33m>[39m {[0m

ERROR in ./src/modules/users/user-profile-client.service.ts:69:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 67 |[39m     [36mconst[39m params [33m=[39m externalIds[33m.[39mmap(id [33m=>[39m [32m`externalIds=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 68 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 69 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch/external?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 70 |[39m   }
   [90m 71 |[39m
   [90m 72 |[39m   [36masync[39m searchUsers(query[33m:[39m string[33m,[39m excludeUserId[33m?[39m[33m:[39m string[33m,[39m page [33m=[39m [35m0[39m[33m,[39m size [33m=[39m [35m20[39m)[33m:[39m [33mPromise[39m[33m<[39m[33mSpringPagedResult[39m[33m<[39m[33mSpringUserProfileSummary[39m[33m>>[39m {[0m

(node:148872) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:139896) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  TypERROR in ./src/modules/channels/channels.service.ts:362:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 360 |[39m
   [90m 361 |[39m     member[33m.[39mpreferences [33m=[39m { [33m...[39mmember[33m.[39mpreferences[33m,[39m [33m...[39mpreferences }[33m;[39m
  [31m[1m>[22m[39m[90m 362 |[39m     [36mreturn[39m member[33m.[39msave()[33m;[39m
   [90m     |[39m                   [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 363 |[39m   }
   [90m 364 |[39m
   [90m 365 |[39m   [36masync[39m markAsRead([0m

ERROR in ./src/modules/channels/channels.service.ts:382:19
TS2339: Property 'save' does not exist on type 'ChannelMember'.
  [0m [90m 380 |[39m     member[3(node:149960) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 412 |[39m
  [31m[1m>[22m[39m[90m 413 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 414 |[39m       channelId[33m,[39m
   [90m 415 |[39m       { $pull[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 416 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

(node:147796) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39m       channelId[33m,[39m
   [90m 405 |[39m       { $addToSet[33m:[39m { [32m'settings.pinnedMessageIds'[39m[33m:[39m [36mnew[39m [33mTypes[39m[33m.[39m[33mObjectId[39m(messageId) } }[33m,[39m
   [90m 406 |[39m       { [36mnew[39m[33m:[39m [36mtrue[39m }[33m,[39m[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 411 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[3ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39(node:132664) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:151780) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
ERROR in ./src/modules/channels/channels.service.ts:403:5
TS2322: Type 'Channel | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 401 |[39m     [36mawait[39m [36mthis[39m[33m.[39mvalidateAdminAccess(channelId[33m,[39m userId)[33m;[39m
   [90m 402 |[39m
  [31m[1m>[22m[39m[90m 403 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelModel[33m.[39mfindByIdAndUpdate(
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 404 |[39(node:153752) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.service.ts:413:5
TS2(node:150400) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0(node:152308) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
ERROR in ./src/modules/channels/channels.controller.ts:241:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 239 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 240 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 241 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39mpinMessage(id[33m,[39m body[33m.[39mmessageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 242 |[39m   }
   [90m 243 |[39m
   [90m 244 |[39m   [33m@[39m[33mDelete[39m([32m':id/pin/:messageId'[39m)[0m

ERROR in ./src/modules/channels/channels.controller.ts:255:5
TS2322: Type 'ChannelDocument | null' is not assignable to type 'Channel'.
  Type 'null' is not assignable to type 'Channel'.
  [0m [90m 253 |[39m     [33m@[39m[33mRequest[39m() req[33m:[39m any[33m,[39m
   [90m 254 |[39m   )[33m:[39m [33mPromise[39m[33m<[39m[33mChannel[39m[33m>[39m {
  [31m[1m>[22m[39m[90m 255 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mchannelsService[33m.[39munpinMessage(id[33m,[39m messageId[33m,[39m req[33m.[39muser[33m.[39mid)[33m;[39m
   [90m     |[39m     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 256 |[39m   }
   [90m 257 |[39m }
   [90m 258 |[39m[0m

(node:101436) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:149900) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
(node:141824) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:150712) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
D:\Learning\QuckApp\services\backend-gateway\dist\main.js:14532
/***
^^^^

SyntaxError: Invalid or unexpected token
    at wrapSafe (node:internal/modules/cjs/loader:1378:20)
    at Module._compile (node:internal/modules/cjs/loader:1428:41)
    at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
    at Module.load (node:internal/modules/cjs/loader:1288:32)
    at Module._load (node:internal/modules/cjs/loader:1104:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:173:12)
    at node:internal/main/run_main_module:28:49

Node.js v20.18.1
ERROR in ./src/modules/users/user-profile-client.service.ts:62:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 60 |[39m     [36mconst[39m params [33m=[39m ids[33m.[39mmap(id [33m=>[39m [32m`ids=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 61 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 62 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 63 |[39m   }
   [90m 64 |[39m
   [90m 65 |[39m   [36masync[39m getUsersByExternalIds(externalIds[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m[33mSpringUserProfile[39m[][33m>[39m {[0m

ERROR in ./src/modules/users/user-profile-client.service.ts:69:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 67 |[39m     [36mconst[39m params [33m=[39m externalIds[33m.[39mmap(id [33m=>[39m [32m`externalIds=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 68 |[39m (node:153668) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.pr(node:153784) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
9m   [36masync[39m getUsersByExternalIds(externalIds[33m:[39m string[])[33m:[39m [33mPromise[39m[33m<[39m[33mSpringUserProfile[39m[][33m>[39m {[0m

ERROR in ./src/modules/users/user-profile-client.service.ts:69:17
TS2339: Property 'requestInternal' does not exist on type 'UserProfileClientService'.
  [0m [90m 67 |[39m     [36mconst[39m params [33m=[39m externalIds[33m.[39mmap(id [33m=>[39m [32m`externalIds=${id}`[39m)[33m.[39mjoin([32m'&'[39m)[33m;[39m
   [90m 68 |[39m     [90m// Use internal endpoint with API key auth[39m
  [31m[1m>[22m[39m[90m 69 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mrequestInternal[33m<[39m[33mSpringUserProfile[39m[][33m>[39m([32m'GET'[39m[33m,[39m [32m`/internal/users/profiles/batch/external?${params}`[39m)[33m;[39m
   [90m    |[39m                 [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
   [90m 70 |[39m   }
   [90m 71 |[39m
   [90m 72 |[39m   [36masync[39m searchUsers(query[33m:[39m string[33m,[39m excludeUserId[33m?[39m[33m:[39m string[33m,[39m page [33m=[39m [35m0[39m[33m,[39m size [33m=[39m [35m20[39m)[33m:[39m [33mPromise[39m[33m<[39m[33mSpringPagedResult[39m[33m<[39m[33mSpringUserProfileSummary[39m[33m>>[39m {[0m

(node:123964) [MONGOOSE] Warning: Duplicate schema index on {"phoneNumber":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
[Bootstrap] app.listen error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:3003
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3003
}

Node.js v20.18.1
